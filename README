OpenOffice build system
-----------------------

Building the packages from source
=================================
Overview:
  apt-get source openoffice.org
  apt-get build-dep openoffice.org (to install build dependencies)
    [ somehow broken yet, probably because of the various |'s ]
  cd <source directory>
  debuild

Changing the build behaviour with DEB_BUILD_OPTIONS
---------------------------------------------------
These options are supported:

  debug     - build with FULL debug symbols. Default is just to build
	      with SMALL ones since the deb otherwise gets too big
	      ((>400M, ca. 1GB I-S))

  ccache    - enable the use of ccache during the build.  This is highly
	      recommended if you plan on building the package more than once,
	      or doing any development on the packages.  A typical speedup is
	      from 11 hours to 3 hours on the second build (PIII 800Mhz).  Be
	      aware that you need EXTRAPACKAGES="ccache" in /etc/pbuilderrc
	      when trying to build openoffice.org with ccache in
	      $DEB_BUILD_OPTIONS under pbuilder (this has no effect on speed,
	      though because the cache does not persist in pbuilder)

  parallel=<n>
            - enable n projects to be built in parallel (-P flag to build.pl).
              The log output can get a little confusing, and some projects
	      may fail still. You need to remove ooo-build/config.status if you
	      change this value after interrupting a build.
	      
  lang=<code>
  	    - Build only the specified language

  nocheck
	    - disable run of tests when enabled in rules


The targets that are built during the package build
---------------------------------------------------

- targets run during the package build -

configure          - Does prerequisites for the build like unpacking extra
                     stuff and run configure in ooo-build. 

build              - as the name says

install            - Copy files from debian/tmp/pkg into the correct locations
                     for the final package layout in debian/openoffice.org*
	             where we need to do that here because it affects arch-dep
		     and arch-indep stuff and therefore cannot be done in
		     install-arch / install-indep.

install-arch       - installs arch-dependent stuff into the arch-dep. packages
install-indep      -  "       "-independent   "     "   "    "-indep. packages

langpackgs         - Installs the language packgs
helppkgs           - Installs the help packages

maintscripts       - Generates  the maintainer scripts

get-ooo-build      - get ooo-build
download           - downloads needed files from ooo.ximian.com, normally
                     not needed, already done
get-orig-source	   - gets original source (only works for milestones right now)
vcsupdate          - as the name says ;-)

Build system file layout
========================
debian/scripts:
  Directory containing various debian-specific build-related scripts.

ooo-build/:
  Checkout of ooo-build; containing the build scripts and the shared
  patches (patches/); also the installation scripts for installing into
  debian/tmp/pkg (-> ooinstall, package-ooo).

  For adding patches; please do so in ooo-build. To get a source tree
  unpacked and patched run:
	debian/rules configure
	cd ooo-build && make patch.apply

  See README and www/* for documentation.

