OpenOffice build system
-----------------------

Building the packages from source
=================================
Overview:
  apt-get source openoffice.org
  apt-get build-dep openoffice.org (to install build dependencies)
    [ somehow broken yet, probably because of the various |'s ]
  cd <source directory>
  debuild

Changing the build behaviour with DEB_BUILD_OPTIONS
---------------------------------------------------
These options are supported:

  debug     - enable debug build.  See the buildprj target for instructions
              about building individual modules with debug.

  ccache    - enable the use of ccache during the build.  This is highly
	      recommended if you plan on building the package more than once,
	      or doing any development on the packages.  A typical speedup is
	      from 11 hours to 3 hours on the second build (PIII 800Mhz).  Be
	      aware that you need EXTRAPACKAGES="ccache" in /etc/pbuilderrc
	      when trying to build openoffice.org with ccache in
	      $DEB_BUILD_OPTIONS under pbuilder (this has no effect on speed,
	      though because the cache does not persist in pbuilder)

  num-cups=<n>
            - enable n projects to be built in parallel (-P flag to build.pl).
              The log output can get a little confusing, and some projects
	      may fail still. You need to remove ooo-build/config.status if you
	      change this value after interrupting a build.
	      
  from=<prj>
            - Resume build from the specified project.  Useful if a build is 
	      interrupted.

  lang=<code>
  	    - Build only the specified language

The targets that are built during the package build
---------------------------------------------------

- targets run during the package build -

configure          - Does prerequisites for the build like unpacking extra
                     stuff and run configure in ooo-build. 

build              - as the name says

install            - Copy files from debian/tmp/pkg into the correct locations
                     for the final package layout in debian/openoffice.org*
	             where we need to do that here because it affects arch-dep
		     and arch-indep stuff and therefore cannot be done in
		     install-arch / install-indep.

install-arch       - installs arch-dependent stuff into the arch-dep. packages
install-indep      -  "       "-independent   "     "   "    "-indep. packages

langpackgs         - Installs the language packgs
helppkgs           - Installs the help packages

maintscripts       - Generates  the maintainer scripts

- clean targets -

In addition to the normal 'clean', there are some partial clean operations for
saving space without having to completely rebuild the packages:

clean-debdir       - Clean up the package directories (about 830M).  Rebuilds
                     start at 'setup'.

clean-instsetoo    - Clean up the installation sets and package directories
                     (about 2.5 Gb!).  Rebuilds start at 'insetsetoo'.

clean-objectdirs   - Clean compilation results, but leave solver (cleans about
		     600Mb in addition to instsetoo).  Rebuilds start at
		     'dmake, but you can still develop and build individual
                     projects.  This is the equivalent of downloading a
                     preinstalled solver tree.

- other targets -

get-ooo-build      - get ooo-build
download           - downloads needed files from ooo.ximian.com, normally
                     not needed, already done
cvsupdate          - as the name says ;-)

environment        - show build environment

makebinariestar    - make tarball of binaries in the output tree

Build system file layout
========================
debian/scripts:
  Directory containing various debian-specific build-related scripts.

ooo-build/:
  Checkout of ooo-build; containing the build scripts and the shared
  patches (patches/); also the installation scripts for installing into
  debian/tmp/pkg (-> ooinstall, package-ooo).

  For adding patches; please do so in ooo-build.

  See README and www/* for documentation.

