From 5e73b07c36ec1e40337075b93207c438d49ca565 Mon Sep 17 00:00:00 2001
From: Rene Engelhard <rene@debian.org>
Date: Wed, 6 Nov 2019 07:15:51 +0100
Subject: fix --disable-gui build on 32bit (missing -ldl)

Change-Id: I66cd04efe5486459d9cc777a532925d25fbd1e86
Reviewed-on: https://gerrit.libreoffice.org/82118
Tested-by: Jenkins
Reviewed-by: Rene Engelhard <rene@debian.org>
Tested-by: Rene Engelhard <rene@debian.org>
---
 vcl/Library_vcl.mk | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

diff --git a/vcl/Library_vcl.mk b/vcl/Library_vcl.mk
index 00b98cd..38bce20 100644
--- a/vcl/Library_vcl.mk
+++ b/vcl/Library_vcl.mk
@@ -543,6 +543,12 @@ $(eval $(call gb_Library_use_externals,vcl,\
 ))
 endif
 
+ifeq ($(OS), $(filter LINUX %BSD SOLARIS, $(OS)))
+$(eval $(call gb_Library_add_libs,vcl,\
+    -lm $(DLOPEN_LIBS) \
+))
+endif
+
 ifeq ($(DISABLE_GUI),TRUE)
 $(eval $(call gb_Library_add_exception_objects,vcl,\
     vcl/unx/generic/printer/jobdata \
@@ -585,7 +591,6 @@ endif
 
 ifeq ($(OS), $(filter LINUX %BSD SOLARIS, $(OS)))
 $(eval $(call gb_Library_add_libs,vcl,\
-    -lm $(DLOPEN_LIBS) \
     -lX11 \
     -lXext \
 ))
-- 
cgit v1.1

