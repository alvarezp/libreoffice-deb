From 4fb35cfbf4b10d5644fd636ddfe3e07b5a932d45 Mon Sep 17 00:00:00 2001
From: Bjoern Michaelsen <bjoern.michaelsen@canonical.com>
Date: Sun, 24 Jun 2012 14:01:54 +0200
Subject: [PATCH] dont run check targets in build, to allow running them
 separately later

Change-Id: Idb46ebcb427522c74632a1813afcbb841fb61243
---
 Makefile.top            |   10 ++++++++--
 solenv/bin/build.pl     |    2 +-
 solenv/gbuild/Module.mk |    2 +-
 3 files changed, 10 insertions(+), 4 deletions(-)

diff --git a/solenv/gbuild/Module.mk b/solenv/gbuild/Module.mk
index 0e694e5..48b25ac 100644
--- a/solenv/gbuild/Module.mk
+++ b/solenv/gbuild/Module.mk
@@ -92,7 +92,7 @@ $(call gb_Module_get_target,%) :
 .PHONY : all build unitcheck slowcheck subsequentcheck clean check debugrun help showmodules translations
 .DEFAULT_GOAL := all
 
-all : build unitcheck
+all : build
 
 build : 
 	$(call gb_Output_announce,top level modules: $(foreach module,$(filter-out deliverlog $(WORKDIR)/bootstrap,$^),$(notdir $(module))),$(true),ALL,6)
diff --git a/Makefile.in b/Makefile.in
index 53ec395..fdc2fb7 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -216,7 +216,7 @@ bootstrap: compilerplugins
 # Build
 #
 build: bootstrap fetch $(if $(filter $(INPATH),$(INPATH_FOR_BUILD)),,cross-toolset)
-	$(GNUMAKE) -j $(PARALLELISM) $(GMAKE_OPTIONS) -f $(SRCDIR)/Makefile.gbuild all slowcheck
+	$(GNUMAKE) -j $(PARALLELISM) $(GMAKE_OPTIONS) -f $(SRCDIR)/Makefile.gbuild all
 
 build-nocheck : export SKIP_TESTS := YES
 build-nocheck : build
@@ -402,7 +402,7 @@ findunusedcode:
               | grep -v ^WSObject \
               > unusedcode.easy
 
-check: dev-install subsequentcheck
+check: unitcheck slowcheck dev-install subsequentcheck
 
 dump-deps:
 	@$(SRCDIR)/bin/module-deps.pl $(GNUMAKE) $(SRCDIR)/Makefile.gbuild
