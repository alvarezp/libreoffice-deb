From 3d0cffab8d06a0f8af6c0ed7a95728203080a7c5 Mon Sep 17 00:00:00 2001
From: Michael Meeks <michael.meeks@collabora.com>
Date: Tue, 7 Oct 2014 10:10:27 +0100
Subject: Disable sdremote by default, and improve flow control.

It was intended to disable sdremote by default when it exited
experimental mode.

This reverts commit 576943b9bf7506829de97d2194c4bee35a485436.

Change-Id: I2c1b5443e334021bd9574316167f48b1af6200e5
Reviewed-on: https://gerrit.libreoffice.org/11838
Reviewed-by: Jan Holesovsky <kendy@collabora.com>
Tested-by: Jan Holesovsky <kendy@collabora.com>

diff --git a/officecfg/registry/schema/org/openoffice/Office/Impress.xcs b/officecfg/registry/schema/org/openoffice/Office/Impress.xcs
index 5fe21cdf..e0800d5 100644
--- a/officecfg/registry/schema/org/openoffice/Office/Impress.xcs
+++ b/officecfg/registry/schema/org/openoffice/Office/Impress.xcs
@@ -619,7 +619,7 @@
             <desc>Indicates whether to enable the Impress remote controller.</desc>
             <label>Enable remote control</label>
           </info>
-          <value>true</value>
+          <value>false</value>
         </prop>
         <prop oor:name="EnablePresenterScreen" oor:type="xs:boolean" oor:nillable="false">
            <info>
diff --git a/sd/source/ui/remotecontrol/Server.cxx b/sd/source/ui/remotecontrol/Server.cxx
index 25045b2..3a7a158 100644
--- a/sd/source/ui/remotecontrol/Server.cxx
+++ b/sd/source/ui/remotecontrol/Server.cxx
@@ -116,7 +116,11 @@ void RemoteServer::execute()
         {
             OString aName( aLine );
 
-            if ( ! pSocket->readLine( aLine ) ) delete pSocket;
+            if ( ! pSocket->readLine( aLine ) )
+            {
+                delete pSocket;
+                continue;
+            }
             OString aPin( aLine );
 
             SocketAddr aClientAddr;
-- 
cgit v0.10.2

