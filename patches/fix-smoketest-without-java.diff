--- /dev/null	2010-05-24 16:58:35.275686347 +0200
+++ openoffice.org-3.2.1/ooo-build-3-2-1-3/patches/dev300/fix-smoketest-without-java.diff	2010-06-08 15:21:36.000000000 +0200
@@ -0,0 +1,22 @@
+diff --git a/smoketestoo_native/data/scripts/Global.xba b/smoketestoo_native/data/scripts/Global.xba
+--- smoketestoo_native/data/scripts/Global.xba
++++ smoketestoo_native/data/scripts/Global.xba
+@@ -546,9 +546,15 @@
+ 	bMakeHTMLTest = true
+ 	bMakeMathTest = true
+ 	bMakeChartTest = true
+-	bMakeJavaTest = true
+-	bMakeDBTest = true
+-	bMakeExtensionTest = true
++	if Environ(&quot;SOLAR_JAVA&quot;) = &quot;NO&quot; then
++		bMakeJavaTest = false
++		bMakeDBTest = false
++		bMakeExtensionTest = false
++	else
++		bMakeJavaTest = true
++		bMakeDBTest = true
++		bMakeExtensionTest = true
++	End If
+ 	bMakeSaveOpenXMLTest = true
+ 	REM Disable StarOffice 5.0 tests in case binfilter has not been included
+ 	if Environ(&quot;WITH_BINFILTER&quot;) = &quot;NO&quot; then
diff --git a/patches/dev300/apply b/patches/dev300/apply
index 3a732ae..f4ceb02 100644
--- openoffice.org-3.2.1/ooo-build-3-2-1-3/patches/dev300/apply
+++ openoffice.org-3.2.1/ooo-build-3-2-1-3/patches/dev300/apply
@@ -506,6 +506,9 @@ sfx2-check-existing-template-dirs.diff, i#100518, pmladek
 # FIXME: temporarily disabled as this causes a race condition in calc's cell format dialog.
 #vcl-kerning-fix.diff, n#464436, i#26519, cbosdo
 
+# don't run stuff needing Java in smoketest when built without Java
+fix-smoketest-without-java.diff, i#112212, rengelha
+
 [ LinuxOnly ]
 # fix that allows OOo to work with a standard (unpatched) libjpeg,
 jpegc.c.diff, i#80674, n#272574, flr
