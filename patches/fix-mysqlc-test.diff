From 38f4439c02539cbb115106783fd70f2be25e5e58 Mon Sep 17 00:00:00 2001
From: Noel Grandin <noel.grandin@collabora.co.uk>
Date: Mon, 29 Nov 2021 15:49:38 +0200
Subject: [PATCH] fix mysqlc test after Sequence::operator[] change

Change-Id: I247aeceaa4100295beec8107385d2ae28765dde8
---
 connectivity/qa/connectivity/mysql/mysql.cxx | 11 ++++++-----
 1 file changed, 6 insertions(+), 5 deletions(-)

diff --git a/connectivity/qa/connectivity/mysql/mysql.cxx b/connectivity/qa/connectivity/mysql/mysql.cxx
index 7a4267b5e95b..7e42162e0334 100644
--- a/connectivity/qa/connectivity/mysql/mysql.cxx
+++ b/connectivity/qa/connectivity/mysql/mysql.cxx
@@ -22,6 +22,7 @@
 #include <com/sun/star/sdbc/XDriver.hpp>
 
 #include <com/sun/star/util/DateTime.hpp>
+#include <comphelper/propertysequence.hxx>
 #include <svtools/miscopt.hxx>
 #include <osl/process.h>
 
@@ -101,16 +102,16 @@ void MysqlTestDriver::setUp()
     CPPUNIT_ASSERT_MESSAGE("no mysqlc component!", m_xMysqlcComponent.is());
 
     // set user name and password
-    m_infos = Sequence<PropertyValue>{ 2 };
-    m_infos[0].Name = OUString{ "user" };
     sal_Int32 nPer = m_sUrl.indexOf("/");
-    m_infos[0].Value = makeAny(m_sUrl.copy(0, nPer));
+    OUString sUsername = m_sUrl.copy(0, nPer);
     m_sUrl = m_sUrl.copy(nPer + 1);
-    m_infos[1].Name = OUString{ "password" };
     sal_Int32 nAt = m_sUrl.indexOf("@");
-    m_infos[1].Value = makeAny(m_sUrl.copy(0, nAt));
+    OUString sPassword = m_sUrl.copy(0, nAt);
     m_sUrl = m_sUrl.copy(nAt + 1);
 
+    m_infos = comphelper::InitPropertySequence({ { "user", makeAny(sUsername) },
+                                                 { "password", makeAny(sPassword) } });
+
     m_xDriver.set(m_xMysqlcComponent, UNO_QUERY);
     if (!m_xDriver.is())
     {
-- 
2.30.2

