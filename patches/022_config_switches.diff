Index: oo_1.1rc_src/config_office/configure.in
===================================================================
RCS file: /cvs/tools/config_office/configure.in,v
retrieving revision 1.53.2.8
diff -u -3 -p -r1.53.2.8 configure.in
--- oo_1.1rc_src/config_office/configure.in	4 Jul 2003 10:05:00 -0000	1.53.2.8
+++ oo_1.1rc_src/config_office/configure.in	23 Jul 2003 08:20:32 -0000
@@ -23,6 +23,12 @@ AC_ARG_WITH(gpc,
                           This is required to allow some strict packagers to
                           comply with their distrubution policy.
 ],,)
+AC_ARG_WITH(fonts,
+[  --without-fonts        Removes Bitstream Vera fonts from
+                          openoffice.org installation set, for people building
+                          for specific distributions where the fonts are known 
+                          to be already available
+],,)
 AC_ARG_ENABLE(gcc3,
 [  --enable-gcc3          Deprecated: Now has no effect, checks compiler version.
 ],,)
@@ -45,6 +51,9 @@ AC_ARG_ENABLE(static-gtk,
                           the static libraries instead of the dynmaic ones. 
                           (enables -Bstatic linker flag for gtk libraries)
 ],,)
+AC_ARG_ENABLE(rpath,
+[  --disable-rpath:        Disable the use of relative paths in shared libraries
+],,)
 AC_ARG_WITH(stlport4-home,
 [  --with-stlport4-home    The location that STLport4 is installed in. The STL
                           header files are assumed to be in stlport4-home/stlport
@@ -76,6 +85,12 @@ AC_ARG_WITH(perl-home,
  
                           Usage: --with-perl-home=<absolute path to Perl 5 home>
 ],,)
+AC_ARG_WITH(python,
+[  --with-python           If you want to use the Python on your system, instead of
+                          the internal version included in the source, use this flag.
+
+                          Usage: --with-python[=path-to-python]
+],,)
 AC_ARG_WITH(cl-home,
 [  --with-cl-home          For Windows NT users, please supply the path
                           for the Microsoft C/C++ compiler. 
@@ -305,6 +320,16 @@ else
 fi
 
 dnl ===================================================================
+dnl Disable rpath in shared libraries?
+dnl ===================================================================
+if test "$enable_rpath" = "no"; then
+   ENABLE_RPATH="no"
+else
+   ENABLE_RPATH="yes"
+fi
+AC_SUBST(ENABLE_RPATH)
+
+dnl ===================================================================
 dnl WINNT uses either 4nt or tcsh, all other O/S use tcsh.
 dnl The following sets the with_use_shell variable.
 dnl ===================================================================
@@ -1041,6 +1096,20 @@ else
    TCSH="NO_TCSH_NEEDED"
 fi
 dnl ===================================================================
+dnl Check for system python
+dnl ===================================================================
+AC_MSG_CHECKING([which python to use])
+if test -n "$with_python"; then
+    AC_MSG_RESULT([external])
+    if test "$with_python" != "yes"; then
+        PYTHON="$with_python"
+    fi
+    AM_PATH_PYTHON([2.2])
+else
+    AC_MSG_RESULT([internal])
+    SCPDEFS="$SCPDEFS -DWITH_PYTHON"
+fi
+dnl ===================================================================
 dnl Check whether the gtk 2.0 libraries are available.
 dnl ===================================================================
 if test  "$test_gtk" = "yes"; then
@@ -1243,6 +1312,19 @@ else
 fi
 
 dnl ===================================================================
+dnl Test whether to include fonts
+dnl ===================================================================
+AC_MSG_CHECKING([whether to include Bitstream Vera fonts])
+if test "$with_fonts" != "no" ; then
+  AC_MSG_RESULT([yes])
+  WITH_FONTS=YES
+  SCPDEFS="$SCPDEFS -DWITH_FONTS"
+else
+  AC_MSG_RESULT([no])
+  WITH_FONTS=NO
+fi
+
+dnl ===================================================================
 dnl Test for the presence of Ant and that it works
 dnl ===================================================================
 
@@ -1416,6 +1499,10 @@ AC_SUBST(ENABLE_STATIC_GTK)
 AC_SUBST(ENVCFLAGSCXX)
 AC_SUBST(ENABLE_CRASHDUMP)
 AC_SUBST(WITH_GPC)
+AC_SUBST(WITH_FONTS)
+AC_SUBST(PYTHON)
+AC_SUBST(PYTHON_VERSION)
+AC_SUBST(SCPDEFS)
 
 AC_OUTPUT([set_soenv])
 
Index: oo_1.1rc_src/config_office/set_soenv.in
===================================================================
RCS file: /cvs/tools/config_office/set_soenv.in,v
retrieving revision 1.8.2.5
diff -u -3 -p -r1.8.2.5 set_soenv.in
--- oo_1.1rc_src/config_office/set_soenv.in	4 Jul 2003 10:05:01 -0000	1.8.2.5
+++ oo_1.1rc_src/config_office/set_soenv.in	23 Jul 2003 08:20:32 -0000
@@ -1639,6 +1642,7 @@ else {
   }
 }
 ToFile( "SOLARDEF",          $SOLARDEF,          "e" );
+ToFile( "SCPDEFS",           '@SCPDEFS@',        "e" );
 ToFile( "SOLAREXTRAINC",     $SOLAREXTRAINC,     "e" );
 ToFile( "SOLAREXTRALIB",     $SOLAREXTRALIB,     "e" );
 ToFile( "SOLARINCLUDES",     $SOLARINCLUDES,     "e" );
@@ -1655,7 +1659,13 @@ if ( $COM ne "MSC" ) {
 }
 ToFile( "ENVCFLAGSCXX",      "@ENVCFLAGSCXX@",    "e" );
 ToFile( "ENABLE_CRASHDUMP",  "@ENABLE_CRASHDUMP@","e" );
-ToFile( "WITH_GPC",          "@WITH_GPC@",      "e" );
+ToFile( "WITH_GPC",          "@WITH_GPC@",        "e" );
+ToFile( "WITH_FONTS",        "@WITH_FONTS@",      "e" );
+ToFile( "SYSTEM_PYTHON",     "@PYTHON@",          "e" );
+ToFile( "PYTHON_VERSION",    "@PYTHON_VERSION@",  "e" );
+if ( '@ENABLE_RPATH@' eq "no" ) {
+  ToFile( "LINKFLAGSRUNPATH",'',                  "e" );
+}
 ToFile( "GXX_INCLUDE_PATH",  "@GXX_INCLUDE_PATH@","e" );
 ToFile( "COMMON_BUILD_TOOLS",$COMMON_BUILD_TOOLS, "e" );
 if ($platform ne "$Winnt")
